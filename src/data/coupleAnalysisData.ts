import { AppMode } from '../types'

// カップル分析結果の型定義
export interface CoupleAnalysis {
  id: string
  mode: AppMode
  type1: string
  type2: string
  compatibilityScore: number
  relationshipType: string
  coupleDescription: string // 二人で読み上げるカップル紹介文
  specificExperiences: string[] // 付き合ったら起きること・相性の良い部分
  strengths: string[]
  challenges: string[]
  advice: string[]
  dateIdeas: string[]
  communicationTips: string[]
  longTermOutlook: string
  warningSigns: string[]
  improvementTips: string[]
}

// 恋愛モード用のカップル分析データ
const romanceCoupleAnalysis: CoupleAnalysis[] = [
  {
    id: 'explorer_social_x_explorer_introvert',
    mode: 'romance',
    type1: '冒険的社交家',
    type2: '内省的探求者',
    compatibilityScore: 85,
    relationshipType: '刺激的な探求カップル',
    coupleDescription: 'あなたたちは「刺激的な探求カップル」です！一人は新しい体験を求めて人との交流でエネルギーを得る冒険家、もう一人は深く考えて一人の時間を大切にする探求者。この組み合わせは、お互いの違いを尊重しながら、一緒に新しい世界を発見していく素晴らしい関係を築けます。社交的な刺激と内省的な深さ、両方の魅力を兼ね備えた、まさに「完璧なバランス」のカップルなのです！',
    specificExperiences: [
      '「AさんはBさんの深く考える性格に惹かれ、『いつも考えてることが面白い』って言うようになる」',
      '「BさんはAさんの社交的な明るさに癒され、『一緒にいると元気になる』って感じる」',
      '「付き合うと、Aさんが新しい場所に連れて行って、Bさんがその場所の歴史や文化を詳しく教えてくれる関係になる」',
      '「Aさんが友達を紹介すると、Bさんは一人一人の性格をよく観察して、『あの人、実は優しい人だね』って言う」',
      '「二人で旅行すると、Aさんが計画を立てて、Bさんがその場所の隠れた名所を見つけてくれる」'
    ],
    strengths: [
      '新しい体験を共有できる',
      'お互いの違いを尊重し合える',
      '成長し合える関係',
      '深い会話ができる'
    ],
    challenges: [
      '社交性の違いによる疲労',
      '一人の時間の取り方の違い',
      '計画性の違い'
    ],
    advice: [
      'お互いのペースを尊重しましょう',
      '定期的にデートの計画を立てましょう',
      '一人の時間も大切にしましょう'
    ],
    dateIdeas: [
      '新しいレストランでのディナー',
      '美術館や博物館巡り',
      'ハイキングや自然散策',
      '読書カフェでの時間'
    ],
    communicationTips: [
      '相手の話を最後まで聞く',
      '感情を素直に伝える',
      '定期的な振り返りの時間を作る'
    ],
    longTermOutlook: 'お互いを高め合いながら、長期的に安定した関係を築ける可能性が高いカップルです。',
    warningSigns: [
      '一方的な会話が続く',
      '相手の価値観を否定する',
      '一人の時間を奪い合う'
    ],
    improvementTips: [
      '週に1回は深い話をする時間を作る',
      'お互いの趣味を理解し合う',
      '定期的に新しいことに挑戦する'
    ]
  },
  {
    id: 'stabilizer_social_x_stabilizer_introvert',
    mode: 'romance',
    type1: '安定した社交家',
    type2: '安定した内省家',
    compatibilityScore: 90,
    relationshipType: '安定した信頼カップル',
    coupleDescription: 'あなたたちは「安定した信頼カップル」です！二人とも安定を大切にし、お互いを深く理解し合える素晴らしい関係です。一人は人とのつながりを大切にする社交家、もう一人は一人の時間も大切にする内省家。この組み合わせは、安定感と信頼関係を基盤に、長期的で深い愛情を育んでいける理想的なカップルです。お互いのペースを尊重しながら、一緒に穏やかで幸せな時間を過ごしていける、まさに「永遠のパートナー」と呼べる関係なのです！',
    specificExperiences: [
      '「AさんはBさんの安定感に安心し、『一緒にいると心が落ち着く』って言うようになる」',
      '「BさんはAさんの人とのつながりを大切にする性格に感動し、『優しい人だな』って感じる」',
      '「付き合うと、二人で同じ映画を何度も見て、『このシーン、前回気づかなかった』って新たな発見をする」',
      '「Aさんが友達と会う時、Bさんは『楽しんできてね』って送り出し、帰ってきたら『どうだった？』って聞く」',
      '「二人で過ごす時間が増えると、『この人といると自然体でいられる』ってお互い感じるようになる」'
    ],
    strengths: [
      'お互いを深く理解している',
      '安定した関係性',
      '信頼関係が強い',
      '長期的な視点を持っている'
    ],
    challenges: [
      '変化への対応が苦手',
      '新しい刺激が少ない',
      'マンネリ化しやすい'
    ],
    advice: [
      '定期的に新しい体験を共有しましょう',
      'お互いの成長をサポートしましょう',
      '小さな変化も大切にしましょう'
    ],
    dateIdeas: [
      '定番レストランでのディナー',
      '映画鑑賞',
      '散歩やドライブ',
      '家でのんびり過ごす'
    ],
    communicationTips: [
      '日常の些細なことでも話し合う',
      '感謝の気持ちを伝える',
      '定期的に将来について話す'
    ],
    longTermOutlook: '非常に安定した関係を築けるカップルです。結婚や長期的なパートナーシップに適しています。',
    warningSigns: [
      'マンネリ化を放置する',
      '変化を恐れすぎる',
      'お互いの成長を阻害する'
    ],
    improvementTips: [
      '月に1回は新しい場所に行く',
      'お互いの目標を共有する',
      '定期的にデートの計画を立てる'
    ]
  },
  {
    id: 'work_growth_x_life_stability',
    mode: 'romance',
    type1: '成長志向の仕事人',
    type2: '安定志向の生活人',
    compatibilityScore: 75,
    relationshipType: 'バランス型カップル',
    coupleDescription: 'あなたたちは「バランス型カップル」です！一人は仕事での成長を追求する向上心あふれる人、もう一人は生活の安定を大切にする穏やかな人。この組み合わせは、お互いの価値観を補完し合いながら、理想的なバランスを保てる素晴らしい関係です。仕事の刺激と生活の安らぎ、両方の魅力を兼ね備えた、まさに「完璧なパートナーシップ」を築けるカップルなのです！',
    specificExperiences: [
      '「AさんはBさんの穏やかな性格に癒され、『仕事のストレスが吹き飛ぶ』って言うようになる」',
      '「BさんはAさんの向上心に刺激され、『私も頑張ろう』って思うようになる」',
      '「付き合うと、Aさんが仕事で疲れて帰ってきた時、Bさんが『お疲れ様』って温かい言葉をかけてくれる」',
      '「Aさんが新しいプロジェクトに挑戦する時、Bさんは『応援してる』って言って、心の支えになってくれる」',
      '「二人で過ごす時間では、Aさんが仕事の話をして、Bさんが『すごいね』って素直に褒めてくれる関係になる」'
    ],
    strengths: [
      'お互いの価値観を補完し合える',
      '安定と成長のバランスが取れる',
      '長期的な視点を持っている',
      'お互いを支え合える'
    ],
    challenges: [
      '優先順位の違い',
      '時間の使い方の違い',
      'ストレス解消法の違い'
    ],
    advice: [
      'お互いの価値観を理解しましょう',
      'バランスの取れた生活を心がけましょう',
      '定期的に話し合いの時間を作りましょう'
    ],
    dateIdeas: [
      '仕事終わりのディナー',
      '週末のリラックスタイム',
      '一緒に料理を作る',
      '映画鑑賞'
    ],
    communicationTips: [
      '仕事の話もプライベートの話も聞く',
      'お互いの時間を尊重する',
      'ストレスを共有し合う'
    ],
    longTermOutlook: 'お互いの価値観を尊重しながら、安定した関係を築けるカップルです。',
    warningSigns: [
      '一方的に自分の価値観を押し付ける',
      '相手の時間を奪いすぎる',
      'ストレスをぶつけ合う'
    ],
    improvementTips: [
      '週に1回は完全にプライベートな時間を作る',
      'お互いの目標を理解し合う',
      '定期的に将来について話し合う'
    ]
  },
  {
    id: 'direct_group_x_caring_individual',
    mode: 'romance',
    type1: '率直なグループリーダー',
    type2: '思いやりのある個人主義者',
    compatibilityScore: 80,
    relationshipType: 'リーダーシップ補完カップル',
    coupleDescription: 'あなたたちは「リーダーシップ補完カップル」です！一人は率直でグループを引っ張る力強いリーダー、もう一人は思いやり深く個人を大切にする優しい人。この組み合わせは、お互いの強みを活かし合いながら、完璧なチームワークを発揮できる素晴らしい関係です。力強さと優しさ、リーダーシップと思いやり、両方の魅力を兼ね備えた、まさに「理想的なパートナー」と呼べるカップルなのです！',
    specificExperiences: [
      '「AさんはBさんの思いやり深い性格に感動し、『優しすぎて心配になる』って言うようになる」',
      '「BさんはAさんのリーダーシップに憧れ、『頼りになる人だな』って感じる」',
      '「付き合うと、Aさんが困ってる人を見つけると、Bさんが『一緒に手伝おう』って言ってくれる」',
      '「Aさんが決断に迷ってる時、Bさんは『あなたの判断を信じてる』って言って、背中を押してくれる」',
      '「二人で友達と会う時、Aさんが場を盛り上げて、Bさんが一人一人に気を配る、完璧なチームワークを発揮する」'
    ],
    strengths: [
      'お互いの強みを活かし合える',
      'バランスの取れた関係',
      'お互いを支え合える',
      '成長し合える'
    ],
    challenges: [
      'コミュニケーションスタイルの違い',
      '意思決定の方法の違い',
      'ストレス対処法の違い'
    ],
    advice: [
      'お互いのコミュニケーションスタイルを理解しましょう',
      '意思決定は一緒に行いましょう',
      'お互いの強みを活かしましょう'
    ],
    dateIdeas: [
      'リーダーシップを活かしたデート企画',
      '思いやりのあるサプライズ',
      '一緒に新しいことに挑戦',
      'お互いの趣味を体験する'
    ],
    communicationTips: [
      '率直さと思いやりを両立する',
      'お互いの意見を尊重する',
      '定期的にフィードバックを交換する'
    ],
    longTermOutlook: 'お互いの強みを活かしながら、長期的に安定した関係を築けるカップルです。',
    warningSigns: [
      '一方的にリーダーシップを取る',
      '相手の意見を聞かない',
      '思いやりを欠く'
    ],
    improvementTips: [
      '月に1回は役割を交代する',
      'お互いの強みを理解し合う',
      '定期的に関係性を見直す'
    ]
  },
  {
    id: 'adventure_passion_x_stable_stable',
    mode: 'romance',
    type1: '情熱的な冒険家',
    type2: '完全な安定家',
    compatibilityScore: 65,
    relationshipType: '刺激と安定のバランスカップル',
    coupleDescription: 'あなたたちは「刺激と安定のバランスカップル」です！一人は情熱的で新しい冒険を求めるエネルギッシュな人、もう一人は安定した生活を大切にする穏やかな人。この組み合わせは、お互いの価値観を尊重しながら、刺激と安定の絶妙なバランスを保てる素晴らしい関係です。情熱的な刺激と穏やかな安定、両方の魅力を兼ね備えた、まさに「完璧なバランス」を追求できるカップルなのです！',
    specificExperiences: [
      '「AさんはBさんの安定感に安心し、『一緒にいると心が落ち着く』って言うようになる」',
      '「BさんはAさんの情熱的な性格に刺激され、『一緒にいるとワクワクする』って感じる」',
      '「付き合うと、Aさんが新しいことに挑戦する時、Bさんが『私も応援してる』って言ってくれる」',
      '「Aさんが冒険的な計画を立てる時、Bさんは『一緒に考えよう』って言って、現実的なアドバイスをしてくれる」',
      '「二人で過ごす時間では、Aさんが新しい発見をして、Bさんがそれを温かく受け入れてくれる関係になる」'
    ],
    strengths: [
      'お互いの価値観を補完し合える',
      'バランスの取れた関係',
      '長期的な視点を持っている',
      'お互いを支え合える'
    ],
    challenges: [
      '価値観の違いが大きい',
      '生活スタイルの違い',
      'ストレス対処法の違い'
    ],
    advice: [
      'お互いの価値観を尊重しましょう',
      'バランスの取れた生活を心がけましょう',
      '定期的に話し合いの時間を作りましょう'
    ],
    dateIdeas: [
      '冒険的な体験と安定した時間の組み合わせ',
      '新しい場所でのリラックスタイム',
      '一緒に新しいことに挑戦',
      '定番の場所での特別な時間'
    ],
    communicationTips: [
      'お互いの価値観を理解する',
      '妥協点を見つける',
      '定期的に将来について話す'
    ],
    longTermOutlook: 'お互いの価値観を尊重しながら、安定した関係を築ける可能性があります。',
    warningSigns: [
      '一方的に自分の価値観を押し付ける',
      '相手の価値観を否定する',
      '妥協を拒否する'
    ],
    improvementTips: [
      '週に1回はお互いの価値観について話す',
      '小さな変化から始める',
      '定期的に新しい体験を共有する'
    ]
  }
]

// 友達モード用のカップル分析データ
const friendshipCoupleAnalysis: CoupleAnalysis[] = [
  {
    id: 'explorer_social_x_explorer_introvert_f',
    mode: 'friendship',
    type1: '冒険的社交家',
    type2: '内省的探求者',
    compatibilityScore: 88,
    relationshipType: '刺激的な探求フレンド',
    coupleDescription: 'あなたたちは「刺激的な探求フレンド」です！一人は新しい体験を求めて人との交流でエネルギーを得る冒険家、もう一人は深く考えて一人の時間を大切にする探求者。この組み合わせは、お互いの違いを尊重しながら、一緒に新しい世界を発見していく素晴らしい友情を築けます。社交的な刺激と内省的な深さ、両方の魅力を兼ね備えた、まさに「最高の友達」と呼べる関係なのです！',
    specificExperiences: [
      '「AさんはBさんの深く考える性格に惹かれ、『いつも考えてることが面白い』って言うようになる」',
      '「BさんはAさんの社交的な明るさに癒され、『一緒にいると元気になる』って感じる」',
      '「付き合うと、Aさんが新しい場所に連れて行って、Bさんがその場所の歴史や文化を詳しく教えてくれる」',
      '「Aさんが友達を紹介すると、Bさんは一人一人の性格をよく観察して、『あの人、実は優しい人だね』って言う」',
      '「二人で旅行すると、Aさんが計画を立てて、Bさんがその場所の隠れた名所を見つけてくれる」'
    ],
    strengths: [
      '新しい体験を共有できる',
      'お互いの違いを尊重し合える',
      '成長し合える関係',
      '深い会話ができる'
    ],
    challenges: [
      '社交性の違いによる疲労',
      '一人の時間の取り方の違い',
      '計画性の違い'
    ],
    advice: [
      'お互いのペースを尊重しましょう',
      '定期的に一緒に過ごす時間を作りましょう',
      '一人の時間も大切にしましょう'
    ],
    dateIdeas: [
      '新しいレストランでのランチ',
      '美術館や博物館巡り',
      'ハイキングや自然散策',
      '読書カフェでの時間'
    ],
    communicationTips: [
      '相手の話を最後まで聞く',
      '感情を素直に伝える',
      '定期的な振り返りの時間を作る'
    ],
    longTermOutlook: 'お互いを高め合いながら、長期的に安定した友情を築ける可能性が高いフレンドです。',
    warningSigns: [
      '一方的な会話が続く',
      '相手の価値観を否定する',
      '一人の時間を奪い合う'
    ],
    improvementTips: [
      '週に1回は深い話をする時間を作る',
      'お互いの趣味を理解し合う',
      '定期的に新しいことに挑戦する'
    ]
  }
]

// 全分析データを結合
export const allCoupleAnalysis: CoupleAnalysis[] = [
  ...romanceCoupleAnalysis,
  ...friendshipCoupleAnalysis
]

// タイプの組み合わせから分析結果を取得する関数
export function getCoupleAnalysis(type1: string, type2: string, mode: AppMode): CoupleAnalysis | null {
  // 直接的な組み合わせを探す
  let analysis = allCoupleAnalysis.find(a => 
    a.mode === mode && 
    (a.type1 === type1 && a.type2 === type2) ||
    (a.type1 === type2 && a.type2 === type1)
  )

  // 見つからない場合は、最も近い組み合わせを返す
  if (!analysis) {
    // デフォルトの分析結果を返す
    analysis = {
      id: `${type1}_x_${type2}`,
      mode,
      type1,
      type2,
      compatibilityScore: 75,
      relationshipType: 'バランス型カップル',
      coupleDescription: 'あなたたちは「バランス型カップル」です！お互いの違いを尊重し合いながら、理想的なバランスを保てる素晴らしい関係です。一人ひとりの個性を活かしながら、一緒に成長していける、まさに「完璧なパートナー」と呼べるカップルなのです！',
      specificExperiences: [
        '「AさんはBさんの独特な価値観に興味を持ち、『面白い考え方だね』って言うようになる」',
        '「BさんはAさんの柔軟性に安心し、『一緒にいると楽しい』って感じる」',
        '「付き合うと、二人で新しい発見を共有し、『この人といると毎日が新鮮』って思うようになる」',
        '「Aさんが新しいことに挑戦する時、Bさんは『私も一緒にやってみたい』って言ってくれる」',
        '「二人で過ごす時間では、お互いの違いを楽しみ、『この人だからこそ見える世界がある』って感じる」'
      ],
      strengths: [
        'お互いの違いを尊重し合える',
        '成長し合える関係',
        '深い理解ができる'
      ],
      challenges: [
        '価値観の違い',
        'コミュニケーションの違い',
        '生活スタイルの違い'
      ],
      advice: [
        'お互いの価値観を理解しましょう',
        '定期的に話し合いの時間を作りましょう',
        'お互いの強みを活かしましょう'
      ],
      dateIdeas: [
        '一緒に新しい体験をする',
        'お互いの趣味を体験する',
        '深い話をする時間を作る'
      ],
      communicationTips: [
        '相手の話を最後まで聞く',
        '感情を素直に伝える',
        '定期的に振り返りの時間を作る'
      ],
      longTermOutlook: 'お互いを尊重しながら、長期的に安定した関係を築ける可能性があります。',
      warningSigns: [
        '一方的な会話が続く',
        '相手の価値観を否定する',
        'コミュニケーションを避ける'
      ],
      improvementTips: [
        '週に1回は深い話をする時間を作る',
        'お互いの趣味を理解し合う',
        '定期的に新しいことに挑戦する'
      ]
    }
  }

  return analysis
}

// ランダムな分析結果を取得する関数（テスト用）
export function getRandomCoupleAnalysis(mode: AppMode): CoupleAnalysis {
  const modeAnalysis = allCoupleAnalysis.filter(a => a.mode === mode)
  const randomIndex = Math.floor(Math.random() * modeAnalysis.length)
  return modeAnalysis[randomIndex] || modeAnalysis[0]
}
