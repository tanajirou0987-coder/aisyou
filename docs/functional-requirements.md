# 機能要件詳細

## 1. 相性診断機能

### 1.1 診断フロー
1. **診断開始**
   - ユーザーが診断を開始
   - 参加者情報の入力（名前、性別等）
   - 診断タイプの選択（恋愛・友達関係）

2. **質問回答**
   - 心理学理論に基づく質問の表示
   - YES/NO形式での回答
   - 進捗表示（現在の質問数/総質問数）

3. **結果計算**
   - 回答に基づく性格タイプの判定
   - 相性スコアの計算
   - ランキングの生成

4. **結果表示**
   - 相性ランキングの表示
   - 詳細な相性分析
   - 具体的なアドバイス

### 1.2 質問システム
- **質問数**: 15問（固定）
- **回答形式**: YES/NO
- **質問内容**: 心理学理論に基づく性格診断
- **進捗管理**: リアルタイムでの進捗表示

### 1.3 結果分析
- **20タイプ分析**: 心理学理論に基づく性格分類
- **相性スコア**: 0-100の数値スケール
- **相性ランキング**: 参加者間の相性順位
- **詳細分析**: 各ペアの詳細な相性情報

## 2. 酒癖マッチング機能

### 2.1 グループ診断フロー
1. **セッション開始**
   - グループリーダーがセッションを開始
   - セッションIDの生成
   - 参加者用のURL共有

2. **参加者登録**
   - 参加者の名前入力
   - 参加者情報の登録
   - 参加完了の確認

3. **グループ診断**
   - 全参加者での同時診断
   - 酒癖に関する質問への回答
   - リアルタイムでの進捗確認

4. **結果集計**
   - 全員の回答完了待機
   - グループ全体の結果計算
   - 相性マトリックスの生成

### 2.2 酒癖タイプ分析
- **6つの酒癖タイプ**: 科学的根拠に基づく分類
- **タイプ判定**: 回答パターンによる自動判定
- **相性分析**: タイプ間の相性スコア
- **活動提案**: タイプに応じたおすすめ活動

### 2.3 グループ機能
- **リアルタイム同期**: 全参加者の進捗確認
- **完了待機**: 全員の回答完了まで待機
- **結果共有**: グループ全体での結果表示
- **個別分析**: 個人の詳細分析

## 3. ユーザーインターフェース

### 3.1 ナビゲーション
- **トップページ**: アプリの紹介と機能選択
- **相性診断**: 個人・カップル向け診断
- **酒癖マッチング**: グループ向け診断
- **結果表示**: 診断結果の表示

### 3.2 レスポンシブデザイン
- **モバイルファースト**: スマートフォン最適化
- **タブレット対応**: 中サイズ画面での最適表示
- **デスクトップ対応**: 大画面での快適な表示

### 3.3 アクセシビリティ
- **キーボードナビゲーション**: キーボードのみでの操作
- **スクリーンリーダー対応**: 音声読み上げ対応
- **色覚異常対応**: 色以外の視覚的手がかり

## 4. データ管理

### 4.1 ローカルストレージ
- **診断結果**: ブラウザローカルストレージでの保存
- **セッション管理**: 一時的なセッションデータ
- **設定情報**: ユーザー設定の保存

### 4.2 データ形式
- **JSON形式**: 構造化されたデータ形式
- **型安全性**: TypeScriptによる型定義
- **バリデーション**: データの整合性チェック

## 5. エラーハンドリング

### 5.1 入力エラー
- **必須項目チェック**: 必須入力の検証
- **形式チェック**: 入力形式の検証
- **エラーメッセージ**: 分かりやすいエラー表示

### 5.2 システムエラー
- **ネットワークエラー**: 通信エラーの処理
- **ブラウザエラー**: ブラウザ固有のエラー処理
- **フォールバック**: エラー時の代替処理

## 6. パフォーマンス要件

### 6.1 レスポンス時間
- **ページ読み込み**: 3秒以内
- **診断完了**: 5分以内
- **結果表示**: 2秒以内

### 6.2 同時接続
- **最大同時ユーザー**: 100人
- **グループサイズ**: 最大20人
- **セッション管理**: 効率的なセッション管理

## 7. セキュリティ要件

### 7.1 データ保護
- **個人情報**: 最小限の個人情報収集
- **データ暗号化**: 機密データの暗号化
- **セキュア通信**: HTTPS通信の強制

### 7.2 プライバシー
- **データ保持期間**: セッション終了後のデータ削除
- **第三者提供**: データの第三者提供禁止
- **ユーザー同意**: データ使用の明示的同意

---

**作成日**: 2024年12月19日  
**バージョン**: 1.0  
**関連ドキュメント**: [requirements.md](./requirements.md)
